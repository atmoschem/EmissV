<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Distribution of emissions by lines — lineSource • EmissV</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Distribution of emissions by lines — lineSource"><meta name="description" content="Create a emission distribution from 'sp' or 'sf' spatial lines data.frame or
spatial lines.
There 3 modes available to create the emission grid:
- using gridInfo function output (defoult)
- using the patch to &quot;wrfinput&quot; (output from real.exe) file or &quot;geo&quot; for (output from geog.exe)
- &quot;sf&quot; (and &quot;sp&quot;) uses a grid in SpatialPolygons format
The variable is the column of the data.frame with contains the variable to be used as emissions,
by defoult the idstribution taken into acount the lench distribution of lines into each grid cell
and the output is normalized."><meta property="og:description" content="Create a emission distribution from 'sp' or 'sf' spatial lines data.frame or
spatial lines.
There 3 modes available to create the emission grid:
- using gridInfo function output (defoult)
- using the patch to &quot;wrfinput&quot; (output from real.exe) file or &quot;geo&quot; for (output from geog.exe)
- &quot;sf&quot; (and &quot;sp&quot;) uses a grid in SpatialPolygons format
The variable is the column of the data.frame with contains the variable to be used as emissions,
by defoult the idstribution taken into acount the lench distribution of lines into each grid cell
and the output is normalized."><meta property="og:image" content="https://atmoschem.github.io/EmissV/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EmissV</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.665.6.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/atmoschem/EmissV/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Distribution of emissions by lines</h1>
      <small class="dont-index">Source: <a href="https://github.com/atmoschem/EmissV/blob/master/R/lineSource.R" class="external-link"><code>R/lineSource.R</code></a></small>
      <div class="d-none name"><code>lineSource.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a emission distribution from 'sp' or 'sf' spatial lines data.frame or
spatial lines.</p>
<p>There 3 modes available to create the emission grid:
- using gridInfo function output (defoult)
- using the patch to "wrfinput" (output from real.exe) file or "geo" for (output from geog.exe)
- "sf" (and "sp") uses a grid in SpatialPolygons format</p>
<p>The variable is the column of the data.frame with contains the variable to be used as emissions,
by defoult the idstribution taken into acount the lench distribution of lines into each grid cell
and the output is normalized.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lineSource</span><span class="op">(</span></span>
<span>  <span class="va">s</span>,</span>
<span>  <span class="va">grid</span>,</span>
<span>  as_raster <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"info"</span>,</span>
<span>  gcol <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  grow <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"length"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="source">Source<a class="anchor" aria-label="anchor" href="#source"></a></h2>
    <p>OpenstreetMap data avaliable <a href="https://www.openstreetmap.org/" class="external-link">https://www.openstreetmap.org/</a> and <a href="https://download.geofabrik.de/" class="external-link">https://download.geofabrik.de/</a></p>
    </div>
    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-s">s<a class="anchor" aria-label="anchor" href="#arg-s"></a></dt>
<dd><p>SpatialLinesDataFrame of SpatialLines object</p></dd>


<dt id="arg-grid">grid<a class="anchor" aria-label="anchor" href="#arg-grid"></a></dt>
<dd><p>grid object with the grid information or filename</p></dd>


<dt id="arg-as-raster">as_raster<a class="anchor" aria-label="anchor" href="#arg-as-raster"></a></dt>
<dd><p>output format, TRUE for raster, FALSE for matrix</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>"info" (default), "wrfinput", "geo", "sp" or "sf" for grid type</p></dd>


<dt id="arg-gcol">gcol<a class="anchor" aria-label="anchor" href="#arg-gcol"></a></dt>
<dd><p>grid points for a "sp" or "sf" type</p></dd>


<dt id="arg-grow">grow<a class="anchor" aria-label="anchor" href="#arg-grow"></a></dt>
<dd><p>grid points for a "sp" or "sf" type</p></dd>


<dt id="arg-variable">variable<a class="anchor" aria-label="anchor" href="#arg-variable"></a></dt>
<dd><p>variable to use, default is line length</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>display additional information</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a raster object containing the spatial distribution of emissions</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="gridInfo.html">gridInfo</a></code> and <code><a href="rasterSource.html">rasterSource</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># loading a shapefile with osm data for sao paulo metropolitan area</span></span></span>
<span class="r-in"><span><span class="va">roads</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,package<span class="op">=</span><span class="st">"EmissV"</span><span class="op">)</span>,<span class="st">"/streets.shp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading layer `streets' from data source </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `/home/runner/work/_temp/Library/EmissV/extdata/streets.shp' </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   using driver `ESRI Shapefile'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 5216 features and 3 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: LINESTRING</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: -46.87612 ymin: -23.8155 xmax: -46.35414 ymax: -23.4179</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  GCS_unknown</span>
<span class="r-in"><span><span class="va">d3</span>    <span class="op">&lt;-</span> <span class="fu"><a href="gridInfo.html">gridInfo</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"EmissV"</span><span class="op">)</span>,<span class="st">"/wrfinput_d03"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Grid information from: /home/runner/work/_temp/Library/EmissV/extdata/wrfinput_d03 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculating only for 2 streets</span></span></span>
<span class="r-in"><span><span class="va">roadLength</span> <span class="op">&lt;-</span> <span class="fu">lineSource</span><span class="op">(</span><span class="va">roads</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">]</span>,<span class="va">d3</span>,as_raster<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> using length as emission variable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of lat points 51</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of lon points 51</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to generate a quick plot</span></span></span>
<span class="r-in"><span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">roadLength</span>,ylab<span class="op">=</span><span class="st">"Lat"</span>, xlab<span class="op">=</span><span class="st">"Lon"</span>,main<span class="op">=</span><span class="st">"Length of roads"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="lineSource-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># lines(road_lines)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Schuch, Sergio Ibarra-Espinosa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

